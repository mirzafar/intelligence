<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>AI Чат</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>

  <style>
    body {
      background: linear-gradient(135deg, #d9f7ff, #eaf3ff, #ffffff);
      font-family: 'Inter', sans-serif;
    }

    .glass {
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.4);
      border-radius: 1rem;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    }

    .scrollbar-thin::-webkit-scrollbar {
      width: 6px;
    }
    .scrollbar-thin::-webkit-scrollbar-thumb {
      background: rgba(0,0,0,0.2);
      border-radius: 4px;
    }

    /* Offcanvas */
    .offcanvas {
      position: fixed;
      top: 0;
      bottom: 0;
      width: 75%;
      max-width: 280px;
      background: #fff;
      box-shadow: 2px 0 12px rgba(0,0,0,0.25);
      transition: transform 0.3s ease-in-out;
      z-index: 50;
    }
    .offcanvas-left { left: 0; transform: translateX(-100%); }
    .offcanvas-right { right: 0; transform: translateX(100%); }
    .offcanvas.show { transform: translateX(0); }
  </style>
</head>
<body class="min-h-screen flex flex-col p-2 md:p-4">

<!-- Верхняя панель для мобилки -->
<header class="flex items-center justify-between bg-white/70 backdrop-blur p-3 rounded-lg mb-2 shadow md:hidden">
  <button id="menu-left" class="text-emerald-600 text-xl"><i class="fas fa-bars"></i></button>
  <h1 class="font-bold text-gray-700">AI Чат</h1>
  <button id="menu-right" class="text-emerald-600 text-xl"><i class="fas fa-folder"></i></button>
</header>

<!-- Основной контейнер -->
<div class="glass w-full flex-1 flex overflow-hidden">

  <!-- Левая панель (desktop) -->
  <aside id="left-sidebar"
         class="hidden md:flex w-1/4 bg-white/60 backdrop-blur p-4 border-r overflow-y-auto scrollbar-thin flex-col">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-sm font-semibold">История чатов</h2>
      <button id="new-chat" class="text-xs bg-gradient-to-r from-green-500 to-emerald-600 text-white px-2 py-1 rounded-md">+ Новый</button>
    </div>
    <ul id="chat-list" class="space-y-2 text-sm text-gray-700"></ul>
  </aside>

  <!-- Центральная область -->
  <main class="flex-1 flex flex-col">
    <!-- Сообщения -->
    <div id="chat-box" class="flex-1 overflow-y-auto px-4 md:px-6 py-4 space-y-3 scrollbar-thin">
      <div class="text-gray-400 text-sm text-center">✨ Новый чат</div>
    </div>

    <!-- Ввод -->
    <div class="border-t p-3 bg-white/80 backdrop-blur">
      <div class="flex items-end gap-2">
        <textarea id="prompt-input" rows="2" placeholder="Введите сообщение..."
                  class="flex-1 resize-none bg-gray-100 p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-emerald-400 text-sm"></textarea>
        <button id="send-btn"
                class="bg-gradient-to-r from-emerald-500 to-green-600 text-white px-4 py-2 rounded-lg text-sm shadow">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>
  </main>

  <!-- Правая панель (desktop) -->
  <aside id="right-sidebar"
         class="hidden lg:flex w-[220px] bg-white/60 backdrop-blur p-4 border-l scrollbar-thin overflow-y-auto flex-col">
    <div class="flex justify-between items-center mb-3">
      <h2 class="text-sm font-semibold">Файлы</h2>
    </div>
    <div id="files-list" class="space-y-2 text-sm text-gray-700"></div>
    <div class="mt-3">
      <input type="file" id="file-upload-input" multiple hidden/>
      <button id="upload-file-btn"
              class="w-full text-xs bg-gradient-to-r from-green-500 to-emerald-600 text-white px-2 py-2 rounded-md">
        <i class="fas fa-plus mr-1 text-[10px]"></i> Добавить
      </button>
    </div>
  </aside>
</div>

<!-- Offcanvas слева -->
<div id="offcanvas-left" class="offcanvas offcanvas-left">
  <div class="p-4 border-b flex justify-between items-center">
    <h2 class="text-sm font-semibold">История чатов</h2>
    <button id="close-left"><i class="fas fa-times"></i></button>
  </div>
  <ul id="chat-list-mobile" class="p-4 space-y-2 text-sm text-gray-700"></ul>
</div>

<!-- Offcanvas справа -->
<div id="offcanvas-right" class="offcanvas offcanvas-right">
  <div class="p-4 border-b flex justify-between items-center">
    <h2 class="text-sm font-semibold">Файлы</h2>
    <button id="close-right"><i class="fas fa-times"></i></button>
  </div>
  <div id="files-list-mobile" class="p-4 space-y-2 text-sm text-gray-700"></div>
</div>

<!-- Лоадер -->
<div id="loader" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden">
  <div class="flex items-center space-x-2 text-white">
    <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"/>
    </svg>
    <span id="loader-text" class="text-sm">Загрузка...</span>
  </div>
</div>

<script>
  // Offcanvas toggle
  $('#menu-left').click(() => $('#offcanvas-left').addClass('show'));
  $('#close-left').click(() => $('#offcanvas-left').removeClass('show'));

  $('#menu-right').click(() => $('#offcanvas-right').addClass('show'));
  $('#close-right').click(() => $('#offcanvas-right').removeClass('show'));

  // Пример синхронизации файлов и чатов между desktop и mobile
  function syncLists() {
    $('#chat-list-mobile').html($('#chat-list').html());
    $('#files-list-mobile').html($('#files-list').html());
  }

  // Обновляем мобильные версии при изменениях
  setInterval(syncLists, 1000);
</script>
</body>
</html>
